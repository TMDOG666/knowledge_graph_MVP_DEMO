# 部署分支部署说明

本说明文档适用于 knowledge_study_agent_graph_app 项目的部署分支，指导如何配置 API Key 及前后端对接。

---

## 1. 修改后端 API Key（docker-compose.yml）

1. 打开项目根目录下的 `docker-compose.yml` 文件。
2. 找到 `backend` 服务下的 `environment` 字段：

   ```yaml
   services:
     backend:
       build: ./backend
       ports:
         - "5000:5000"
       restart: always
       environment:
         - SILICONFLOW_API_KEY=你的APIKEY
   ```

3. 将 `你的APIKEY` 替换为实际的 API Key，例如：

   ```yaml
   environment:
     - SILICONFLOW_API_KEY=sk-xxxxxx
   ```

4. 保存文件。

---

## 2. 修改前端后端 API 地址（frontend/app.js）

1. 打开 `frontend/app.js` 文件。
2. 找到类似如下的代码：

   ```js
   const API_URL = 'http://xxx:5000'; // 你的FastAPI地址
   ```

3. 如果部署到新服务器或端口，请将 `API_URL` 的 IP 和端口修改为实际后端地址，例如：

   ```js
   const API_URL = 'http://新服务器IP:5000';
   ```

4. 保存文件。

---

## 3. 重新构建并启动服务

在项目根目录下执行：

```bash
docker-compose up --build -d
```

---

## 4. 其他注意事项

- 如需批量修改 API Key 或后端地址，可用文本编辑器的全局查找替换功能。
- 若有 .env 文件或其他配置文件涉及 API Key，也请一并更新。

---

## 参考资料
- [Docker Compose 设置环境变量官方文档](https://docs.docker.com/compose/environment-variables/set-environment-variables/) 